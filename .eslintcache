[{"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/routers/index.js":"1","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/Editor.jsx":"2","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/side/side-menu/index.js":"3","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/icon/utils.js":"4","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/pages/appendix/index.jsx":"5","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/EditForm.jsx":"6","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/AddForm.jsx":"7","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/App.js":"8","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/index.jsx":"9","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/commons/http.js":"10","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/pages/Users/AddForm.jsx":"11","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/side/DragBar.jsx":"12","/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/icon/warning.js":"13"},{"size":957,"mtime":1615107259009,"results":"14","hashOfConfig":"15"},{"size":5833,"mtime":1615024533318,"results":"16","hashOfConfig":"15"},{"size":2481,"mtime":1615107042623,"results":"17","hashOfConfig":"15"},{"size":2308,"mtime":1610894565079,"results":"18","hashOfConfig":"15"},{"size":8832,"mtime":1615475970086,"results":"19","hashOfConfig":"15"},{"size":6423,"mtime":1615731583908,"results":"20","hashOfConfig":"15"},{"size":6881,"mtime":1615728879167,"results":"21","hashOfConfig":"15"},{"size":1796,"mtime":1614862691495,"results":"22","hashOfConfig":"15"},{"size":11663,"mtime":1615124662255,"results":"23","hashOfConfig":"15"},{"size":1633,"mtime":1615114934411,"results":"24","hashOfConfig":"15"},{"size":4414,"mtime":1614866170378,"results":"25","hashOfConfig":"15"},{"size":3576,"mtime":1610954674083,"results":"26","hashOfConfig":"15"},{"size":183,"mtime":1610894565080,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"12iifom",{"filePath":"30","messages":"31","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/routers/index.js",[],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/Editor.jsx",["56","57"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/side/side-menu/index.js",["58","59","60","61","62","63","64","65","66"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/icon/utils.js",[],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/pages/appendix/index.jsx",["67","68","69","70"],"import React, { Component } from 'react';\nimport 'braft-editor/dist/index.css';\nimport {\n  Form,\n  Input,\n  Button,\n  Select,\n  Tag,\n  Space,\n  Table,\n  Modal,\n  message,\n  Upload,\n} from 'antd';\nimport { ExclamationCircleOutlined, UserOutlined } from '@ant-design/icons';\nimport { get, post } from '../../commons/http';\n\nconst { confirm } = Modal;\nconst { Option } = Select;\n\nexport default class Appendix extends Component {\n  state = {\n    appendixes: [],\n    APPENDIXES: [],\n  };\n\n  columns = [\n    {\n      title: '竞赛名称',\n      dataIndex: ['competition', 'title'],\n      key: 'title',\n    },\n    {\n      title: '参赛队员',\n      dataIndex: ['team', 'member'],\n      key: 'member',\n    },\n    {\n      title: '作品',\n      key: 'appendix',\n      render: (text, record) => {\n        const { appendix } = record;\n        console.log(appendix, 'sssdasd');\n        return appendix.url ? (\n          <Space size=\"middle\">\n            {/* <a onClick={() => this.edit(record._id)}>aaa</a> */}\n            <a href={appendix.url} download={appendix.name}>\n              点击下载\n            </a>\n          </Space>\n        ) : (\n          <Space size=\"middle\">\n            <span>未提交</span>\n          </Space>\n        );\n      },\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (text, record) => {\n        return (\n          <Space size=\"middle\">\n            {record.appendix.url ? (\n              <a onClick={() => this.delete(record)}>删除作品</a>\n            ) : null}\n            <Upload\n              accept=\".doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.txt,.html,.log,.key,.numbers,.pages,.zip,.tar,.rar,.css,.js,.stp,.igs,.dwg\"\n              method=\"post\"\n              action=\"http://localhost:3001/uploadToGuochuangyun?s=App.CDN.UploadOffice&app_key=5687BCD24AA4D3C1ED073F5C8AC17C6B&sign=wtOVTtR1veX4VVwgSkYMf0Ur9YVHsifAhGl55hbXMrQbwGKWkPmBAEHoo5ydejQncZWI5b\"\n              onChange={(info) => {\n                this.handleChange(\n                  {\n                    competitionId: record.competition.id,\n                    teamId: record.team.id,\n                    appendixId: record.appendix._id,\n                    key: record.key,\n                  },\n                  info\n                );\n              }}\n              showUploadList={false}\n            >\n              <a>提交作品</a>\n            </Upload>\n          </Space>\n        );\n      },\n    },\n  ];\n\n  componentDidMount() {\n    const getAllAppendixes = async () => {\n      const response = await get('/competition/getAllAppendixes');\n      if (response.code === 0) {\n        this.setState({\n          appendixes: response.data.appendixes,\n          APPENDIXES: response.data.appendixes,\n        });\n      } else {\n        message.error('获取数据失败', 1);\n      }\n    };\n\n    getAllAppendixes();\n  }\n\n  handleSearch = (values, isReset = false) => {\n    if (isReset) {\n      this.setState({ appendixes: this.state.APPENDIXES });\n      this.form.resetFields(); //清空表单\n      return;\n    }\n    const { title, members } = values;\n    console.log(title, members);\n    if (!title && !members) return;\n    const appendixes = [...this.state.APPENDIXES];\n    const result = appendixes.filter((appendix) => {\n      if (title) {\n        if (appendix.competition.title.indexOf(title) === -1) {\n          return false;\n        }\n      }\n      if (members) {\n        if (appendix.team.member.indexOf(members) === -1) {\n          return false;\n        }\n      }\n      return true;\n    });\n    this.setState({ appendixes: result });\n  };\n\n  delete = (info) => {\n    const _this = this;\n    confirm({\n      title: '您确定要删除吗？',\n      icon: <ExclamationCircleOutlined />,\n      okText: '确定',\n      cancelText: '取消',\n      onOk() {\n        const deleteFile = async () => {\n          const cdnResponse = await post(\n            `http://localhost:3001/uploadToGuochuangyun?s=App.CDN.Delete&app_key=5687BCD24AA4D3C1ED073F5C8AC17C6B&url=${info.appendix.url}`,\n            {},\n            true\n          );\n          if (cdnResponse.ret === 200) {\n            //cdn删除成功，删除数据库\n            const response = await post('/competition/deleteAppendix', {\n              appendixId: info.appendix._id,\n            });\n            if (response.code === 0) {\n              console.log(_this.state.appendixes, '666');\n              const appendixes = [..._this.state.appendixes];\n              appendixes.forEach((item) => {\n                if (item.appendix._id === info.appendix._id) {\n                  item.appendix = {};\n                }\n              });\n              _this.setState({ appendixes });\n              message.success('删除成功', 1);\n            } else {\n              message.warning('删除失败，请稍后尝试', 1);\n            }\n          } else {\n            message.warning('删除失败，请稍后尝试', 1);\n          }\n        };\n\n        deleteFile();\n      },\n    });\n  };\n\n  //   submit = () => {};\n\n  handleChange = async (submitInfo, info) => {\n    const fileUrl = info.file?.response?.data?.url;\n    if (fileUrl) {\n      const { competitionId, teamId, appendixId, key } = submitInfo;\n      if (appendixId) {\n        const response = await post(`/competition/updateAppendix`, {\n          newAppendix: {\n            name: info.file.name,\n            url: fileUrl,\n            fileType: info.file.type,\n            uid: info.file.uid,\n            size: info.file.size,\n            id: appendixId,\n          },\n        });\n        if (response.code === 0) {\n          const appendix = response.data.appendix;\n          const appendixes = [...this.state.appendixes];\n          appendixes.forEach((item) => {\n            if (item.key === key) {\n              item.appendix = { ...appendix };\n            }\n          });\n          this.setState({ appendixes });\n          message.success('上传成功', 1);\n        } else {\n          message.error('上传失败', 1);\n        }\n      } else {\n        const response = await post(`/competition/submitAppendix`, {\n          competitionId,\n          teamId,\n          newAppendix: {\n            name: info.file.name,\n            url: fileUrl,\n            fileType: info.file.type,\n            uid: info.file.uid,\n            size: info.file.size,\n          },\n        });\n        if (response.code === 0) {\n          const appendix = response.data.appendix;\n          const appendixes = [...this.state.appendixes];\n          appendixes.forEach((item) => {\n            if (item.key === key) {\n              item.appendix = { ...appendix };\n            }\n          });\n          this.setState({ appendixes });\n          message.success('上传成功', 1);\n        } else {\n          message.error('上传失败', 1);\n        }\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: '100%',\n          height: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n      >\n        <div\n          style={{\n            backgroundColor: '#fff',\n            padding: '8px 5px',\n            display: 'flex',\n          }}\n        >\n          <Form\n            layout=\"inline\"\n            onFinish={this.handleSearch}\n            ref={(form) => (this.form = form)}\n          >\n            <Form.Item name=\"title\">\n              <Input\n                style={{ width: 150 }}\n                prefix={<UserOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n                placeholder=\"竞赛名称\"\n              />\n            </Form.Item>\n            <Form.Item name=\"members\">\n              <Input\n                style={{ width: 150 }}\n                prefix={<UserOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n                placeholder=\"参赛队员\"\n              />\n            </Form.Item>\n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\">\n                查询\n              </Button>\n            </Form.Item>\n          </Form>\n          <Button\n            type=\"primary\"\n            onClick={() => this.handleSearch({}, true)}\n            style={{ marginRight: '17px' }}\n          >\n            重置\n          </Button>\n        </div>\n        <div style={{ backgroundColor: '#fff', flex: 1, marginTop: '10px' }}>\n          <Table\n            columns={this.columns}\n            dataSource={this.state.appendixes}\n            pagination={{\n              current: this.state.pageNum,\n              pageSize: this.state.pageSize,\n              // hideOnSinglePage: true,\n              showQuickJumper: true,\n              showSizeChanger: true,\n              onShowSizeChange: (currentPage, pageSize) =>\n                this.pageSizeChange(currentPage, pageSize),\n              onChange: (currentPage) => this.changePage(currentPage),\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n",["71","72"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/EditForm.jsx",["73","74","75","76","77"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/AddForm.jsx",["78","79","80","81"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/App.js",["82"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/competition/index.jsx",["83","84","85","86","87","88","89","90","91","92"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/commons/http.js",[],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/pages/Users/AddForm.jsx",["93","94"],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/side/DragBar.jsx",[],"/Users/huangjiawei/Desktop/AllCode/final-project/sysu-competition-system-admin/src/components/icon/warning.js",[],{"ruleId":"95","severity":1,"message":"96","line":3,"column":10,"nodeType":"97","messageId":"98","endLine":3,"endColumn":13},{"ruleId":"95","severity":1,"message":"99","line":6,"column":10,"nodeType":"97","messageId":"98","endLine":6,"endColumn":20},{"ruleId":"95","severity":1,"message":"100","line":8,"column":3,"nodeType":"97","messageId":"98","endLine":8,"endColumn":19},{"ruleId":"95","severity":1,"message":"101","line":9,"column":3,"nodeType":"97","messageId":"98","endLine":9,"endColumn":15},{"ruleId":"95","severity":1,"message":"102","line":10,"column":3,"nodeType":"97","messageId":"98","endLine":10,"endColumn":18},{"ruleId":"95","severity":1,"message":"103","line":16,"column":7,"nodeType":"97","messageId":"98","endLine":16,"endColumn":14},{"ruleId":"95","severity":1,"message":"104","line":64,"column":40,"nodeType":"97","messageId":"98","endLine":64,"endColumn":46},{"ruleId":"95","severity":1,"message":"105","line":64,"column":48,"nodeType":"97","messageId":"98","endLine":64,"endColumn":51},{"ruleId":"95","severity":1,"message":"106","line":94,"column":11,"nodeType":"97","messageId":"98","endLine":94,"endColumn":16},{"ruleId":"95","severity":1,"message":"107","line":94,"column":39,"nodeType":"97","messageId":"98","endLine":94,"endColumn":51},{"ruleId":"95","severity":1,"message":"108","line":95,"column":11,"nodeType":"97","messageId":"98","endLine":95,"endColumn":20},{"ruleId":"95","severity":1,"message":"109","line":8,"column":3,"nodeType":"97","messageId":"98","endLine":8,"endColumn":6},{"ruleId":"95","severity":1,"message":"110","line":19,"column":9,"nodeType":"97","messageId":"98","endLine":19,"endColumn":15},{"ruleId":"111","severity":1,"message":"112","line":65,"column":15,"nodeType":"113","endLine":65,"endColumn":54},{"ruleId":"111","severity":1,"message":"112","line":84,"column":15,"nodeType":"113","endLine":84,"endColumn":18},{"ruleId":"114","replacedBy":"115"},{"ruleId":"116","replacedBy":"117"},{"ruleId":"95","severity":1,"message":"118","line":6,"column":3,"nodeType":"97","messageId":"98","endLine":6,"endColumn":8},{"ruleId":"95","severity":1,"message":"119","line":7,"column":3,"nodeType":"97","messageId":"98","endLine":7,"endColumn":9},{"ruleId":"95","severity":1,"message":"96","line":14,"column":10,"nodeType":"97","messageId":"98","endLine":14,"endColumn":13},{"ruleId":"95","severity":1,"message":"120","line":15,"column":10,"nodeType":"97","messageId":"98","endLine":15,"endColumn":23},{"ruleId":"95","severity":1,"message":"121","line":17,"column":8,"nodeType":"97","messageId":"98","endLine":17,"endColumn":14},{"ruleId":"95","severity":1,"message":"118","line":6,"column":3,"nodeType":"97","messageId":"98","endLine":6,"endColumn":8},{"ruleId":"95","severity":1,"message":"96","line":14,"column":10,"nodeType":"97","messageId":"98","endLine":14,"endColumn":13},{"ruleId":"95","severity":1,"message":"120","line":16,"column":10,"nodeType":"97","messageId":"98","endLine":16,"endColumn":23},{"ruleId":"95","severity":1,"message":"110","line":21,"column":9,"nodeType":"97","messageId":"98","endLine":21,"endColumn":15},{"ruleId":"95","severity":1,"message":"122","line":2,"column":27,"nodeType":"97","messageId":"98","endLine":2,"endColumn":33},{"ruleId":"123","severity":1,"message":"124","line":68,"column":25,"nodeType":"125","messageId":"126","endLine":68,"endColumn":27},{"ruleId":"123","severity":1,"message":"124","line":68,"column":52,"nodeType":"125","messageId":"126","endLine":68,"endColumn":54},{"ruleId":"123","severity":1,"message":"124","line":70,"column":19,"nodeType":"125","messageId":"126","endLine":70,"endColumn":21},{"ruleId":"123","severity":1,"message":"124","line":70,"column":41,"nodeType":"125","messageId":"126","endLine":70,"endColumn":43},{"ruleId":"111","severity":1,"message":"112","line":81,"column":13,"nodeType":"113","endLine":81,"endColumn":54},{"ruleId":"111","severity":1,"message":"112","line":82,"column":13,"nodeType":"113","endLine":82,"endColumn":61},{"ruleId":"111","severity":1,"message":"112","line":83,"column":13,"nodeType":"113","endLine":83,"endColumn":63},{"ruleId":"111","severity":1,"message":"112","line":85,"column":15,"nodeType":"113","endLine":85,"endColumn":68},{"ruleId":"111","severity":1,"message":"112","line":89,"column":15,"nodeType":"113","endLine":89,"endColumn":66},{"ruleId":"123","severity":1,"message":"127","line":174,"column":32,"nodeType":"125","messageId":"126","endLine":174,"endColumn":34},{"ruleId":"95","severity":1,"message":"118","line":2,"column":31,"nodeType":"97","messageId":"98","endLine":2,"endColumn":36},{"ruleId":"95","severity":1,"message":"96","line":3,"column":10,"nodeType":"97","messageId":"98","endLine":3,"endColumn":13},"no-unused-vars","'get' is defined but never used.","Identifier","unusedVar","'ImageUtils' is defined but never used.","'AppstoreOutlined' is defined but never used.","'MailOutlined' is defined but never used.","'SettingOutlined' is defined but never used.","'SubMenu' is assigned a value but never used.","'target' is assigned a value but never used.","'url' is assigned a value but never used.","'theme' is assigned a value but never used.","'selectedKeys' is assigned a value but never used.","'menuProps' is assigned a value but never used.","'Tag' is defined but never used.","'Option' is assigned a value but never used.","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","no-native-reassign",["128"],"no-negated-in-lhs",["129"],"'Space' is defined but never used.","'Select' is defined but never used.","'publicEncrypt' is defined but never used.","'styles' is defined but never used.","'Router' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","no-global-assign","no-unsafe-negation"]